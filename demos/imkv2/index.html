<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="format-detection" content="telephone=no,email=no">
  <meta name="renderer" content="webkit"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <title>首页</title>
  <link rel="stylesheet" href="vendor/normalize.css">
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="vendor/swiper/css/swiper.min.css">
  <link rel="stylesheet" href="css/taglist.css?v=0d1547d8e7">
  <link rel="stylesheet" href="css/index.css?v=e984779786">
  <style>
    .item {
      overflow: hidden;
    }
  </style>
</head>
<body>
<div id="wrapper">
  <header>
    <div class="logo"><img src="img/logo.png" alt="logo"></div>
    <div class="search"><input type="search" name="" id="" placeholder="请输入关键字查找你喜欢的资源"></div>
    <div class="search-btn"><i class="fa fa-search" aria-hidden="true"></i></div>
  </header>
  <div id="filter">
    <div class="tag-list">
      <div class="outer-container">
        <div class="inner-container">
          <p class="content">
            <a>全部年份</a>
            <a>2009</a>
            <a>2008</a>
            <a>2007</a>
            <a>2006</a>
            <a>2005</a>
            <a>2004</a>
            <a>2003</a>
            <a>2002</a>
            <a>2001</a>
            <a>2000</a>

            <a class="tag-bg"></a>
          </p>
        </div>
      </div>


    </div>
    <div class="tag-list">
      <div class="outer-container">
        <div class="inner-container">
          <p class="content">
            <a>全部年份</a>
            <a>2009</a>
            <a>2008</a>
            <a>2007</a>
            <a>2006</a>
            <a>2005</a>
            <a>2004</a>
            <a>2003</a>
            <a>2002</a>
            <a>2001</a>
            <a>2000</a>

            <a class="tag-bg"></a>
          </p>
        </div>
      </div>


    </div>
    <div class="tag-list">
      <div class="outer-container">
        <div class="inner-container">
          <p class="content">
            <a>全部年份</a>
            <a>2009</a>
            <a>2008</a>
            <a>2007</a>
            <a>2006</a>
            <a>2005</a>
            <a>2004</a>
            <a>2003</a>
            <a>2002</a>
            <a>2001</a>
            <a>2000</a>

            <a class="tag-bg"></a>
          </p>
        </div>
      </div>


    </div>
    <div class="tag-list">
      <div class="outer-container">
        <div class="inner-container">
          <p class="content">
            <a>全部年份</a>
            <a>2009</a>
            <a>2008</a>
            <a>2007</a>
            <a>2006</a>
            <a>2005</a>
            <a>2004</a>
            <a>2003</a>
            <a>2002</a>
            <a>2001</a>
            <a>2000</a>

            <a class="tag-bg"></a>
          </p>
        </div>
      </div>


    </div>
    <div class="tag-list">
      <div class="outer-container">
        <div class="inner-container">
          <p class="content">
            <a>全部年份</a>
            <a>2009</a>
            <a>2008</a>
            <a>2007</a>
            <a>2006</a>
            <a>2005</a>
            <a>2004</a>
            <a>2003</a>
            <a>2002</a>
            <a>2001</a>
            <a>2000</a>

            <a class="tag-bg"></a>
          </p>
        </div>
      </div>


    </div>
  </div>
  <main>
    <!-- 微课 -->
    <div class="list">
      <div class="title">
        <span><i class="fa fa-graduation-cap" aria-hidden="true"></i>微课</span>
        <a id="filterToggle" class="more">筛选</a>
      </div>
      <div class="item swiper-container">
        <div class="swiper-wrapper">
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>
          <div class="swiper-slide">
            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

            <a href="#">
              <span class="img" style="background-image: url(img/0.jpg);"><span>广汽传祺广汽传祺广汽传祺</span></span>
              <p><span>张三</span><span class="time"><i class="fa fa-eye" aria-hidden="true"></i>2017-01-01</span></p>
            </a>

          </div>


        </div>

        <div class="swiper-scrollbar"></div>

      </div>
    </div>
  </main>
  <footer>
    <a href="/live/center/index">首页</a>
    <a href="/live-all?type=0">微播</a>
    <a href="/class-all?type=1">微课</a>
    <a href="/file-all?type=2">下载</a>
    <a href="/live/personal/PersonalInfo">个人</a>
  </footer>
</div>

<script src="vendor/jquery-3.1.1.min.js"></script>
<script src="vendor/swiper/js/swiper.jquery.js"></script>
<script>
  $(document).ready(function () {
    function tagbg() {

      $('.tag-bg').each(function (index, dom) {
        var p = $(dom).parent().children('a').eq(0);
        p.addClass('selected');
        var w = p.outerWidth();
        var h = p.outerHeight();
        $(dom).css({
          width: w + 'px',
          height: h + 'px',
          left: p.position().left + 'px',
          top: p.position().top + 'px'
        });
      });
    }
    tagbg();
    var activeIndex;

    $('.tag-list .content a').on('click', function () {
      $(this).addClass('selected').siblings().removeClass('selected');
      var w = $(this).outerWidth();
      var dom = $(this).parent().children('.tag-bg');
      $(dom).css({
        width: w + 'px',
        left: $(this).position().left + 'px'
      });
    });

    function swiperInit() {
      swiper = new Swiper('.swiper-container', {
        scrollbar: '.swiper-scrollbar',
        direction: 'vertical',
        slidesPerView: 'auto',
        mousewheelControl: true,
        freeMode: true,
        roundLengths : true, //防止文字模糊
        onScroll: function(swiper){
          // console.log(1, swiper.activeIndex);
          activeIndex = swiper.activeIndex;
        },
        onReachEnd: function(swiper){
          // console.log('onReachEnd', swiper.isEnd);
          appendA();
        }
      });
    }
    swiperInit();

    function appendA() {
      var slide = $('.swiper-wrapper').children().eq(0).clone();
      if (!$('.swiper-wrapper').find('.fa-refresh').length) {
        $('.swiper-wrapper').append('<div class="swiper-slide refresh"><i class="fa fa-refresh"></i><span>读取中......</span></div>');
      }
      swiperUpdate();

      setTimeout(function() {
        $('.swiper-wrapper').append(slide);
        $('.refresh').remove();
        swiperUpdate();
      }, 700);


    }

    function swiperUpdate() {
      swiper.onResize();
      swiper.update();
    }




    function filterToggle() {
      var h = filterInit();
//      filterHide();
      swiperUpdate();
      $('#filterToggle').on('click', function () {
        var filter = $('#filter').hasClass('hide');
        if (filter) {
          filterShow(h);
        } else {
          filterHide();
        }
      });
    }
    filterToggle();

    function filterInit() {
      var h = $('#filter').outerHeight();
      $('#filter').css({
        height: h + 'px'
      });
      return h;
    }

    function filterHide() {
      $('#filter').addClass('hide').css({
        height: 0 + 'px'
      }).one('webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend', function () {
//        console.log('hide end');
        swiperUpdate();
      });
    }

    function filterShow(h) {
      $('#filter').removeClass('hide').css({
        height: h + 'px'
      }).one('webkitTransitionEnd mozTransitionEnd MSTransitionEnd otransitionend transitionend', function () {
//        console.log('show end');
        swiperUpdate();
      });

    }
  });
</script>
</body>
</html>
